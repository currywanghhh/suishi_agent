# Wu Xing Decision Advisor - V2 ç‰ˆæœ¬æŠ€æœ¯æ±‡æŠ¥

---

## ä¸€ã€ç‰ˆæœ¬è¿­ä»£èƒŒæ™¯

åŸºäº V1 ç‰ˆæœ¬çš„ç”¨æˆ·åé¦ˆå’Œäº§å“åˆ†æï¼Œè¯†åˆ«å‡ºä¸‰ä¸ªæ ¸å¿ƒé—®é¢˜éœ€è¦ä¼˜åŒ–ï¼š

### é—®é¢˜è¯Šæ–­

**é—®é¢˜ 1ï¼šè¾“å‡ºé£æ ¼ä¸ç›®æ ‡ç”¨æˆ·éœ€æ±‚ä¸åŒ¹é…**

ç°çŠ¶åˆ†æï¼š
- V1 è¾“å‡ºæ ·ä¾‹ï¼š"å»ºè®®é€‰æ‹©æš–è‰²è°ƒæ­é…... æ—¢å±•ç°ä½ çš„æˆç†Ÿç¨³é‡ï¼Œåˆä¸å¤±æ´»åŠ›..."
- ç”¨æˆ·ç—›ç‚¹ï¼šå†³ç­–ç„¦è™‘ç—‡ç”¨æˆ·éœ€è¦æ˜ç¡®æŒ‡ä»¤ï¼Œè€Œééœ€è¦äºŒæ¬¡è§£è¯»çš„å¤šé€‰é¡¹å»ºè®®
- æ ¹æœ¬åŸå› ï¼šSystem Prompt å¯¼å‘"å…±æƒ…å¼å»ºè®®"è€Œé"ç¡®å®šæ€§å†³ç­–"

**é—®é¢˜ 2ï¼šæŠ€æœ¯ä»·å€¼ä¸ç”¨æˆ·ä»·å€¼é”™ä½**

ç°çŠ¶åˆ†æï¼š
- æŠ€æœ¯æŠ•å…¥ï¼šå››å±‚ LLM åŒ¹é…ï¼ˆL1â†’L2â†’L3â†’L4ï¼‰ï¼Œè€—æ—¶ 1-2 ç§’
- ç”¨æˆ·è§†è§’ï¼šä¸å…³å¿ƒåŒ¹é…è¿‡ç¨‹ï¼Œåªå…³å¿ƒæœ€ç»ˆç­”æ¡ˆï¼ˆ"æ‰€ä»¥æˆ‘ç©¿ä»€ä¹ˆï¼Ÿ"ï¼‰
- ç³»ç»Ÿè¡Œä¸ºï¼šåŒ¹é…å¤±è´¥æ—¶è¿”å›é”™è¯¯ï¼Œæ— æ³•æä¾›å…œåº•æœåŠ¡

**é—®é¢˜ 3ï¼šäº”è¡Œç†è®ºè¡¨è¾¾æ–¹å¼éœ€è¦æœ¬åœ°åŒ–**

ç°çŠ¶åˆ†æï¼š
- V1 è¡¨è¾¾ï¼š"åœŸçš„ç¨³é‡åŒ…å®¹"ã€"æ°´çš„çµæ´»é€‚åº”"ã€"ç«çš„çƒ­æƒ…è¡¨è¾¾"
- ç›®æ ‡å¸‚åœºï¼šåŒ—ç¾ç”¨æˆ·å¯¹ä¸­å¼å“²å­¦æœ¯è¯­ç†è§£æˆæœ¬é«˜
- ä¼˜åŒ–æ–¹å‘ï¼šä¿ç•™äº”è¡Œé€»è¾‘ï¼Œæ—¥å¸¸åŒ–è¡¨è¾¾æ–¹å¼

---

## äºŒã€V2 æ ¸å¿ƒæ”¹è¿›ï¼šé’ˆå¯¹ä¸‰å¤§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ

---

## äºŒã€V2 æŠ€æœ¯æ”¹è¿›æ–¹æ¡ˆ

### æ”¹è¿› 1ï¼šPrompt Engineering é‡æ„

**ç›®æ ‡ï¼š** ä»"å»ºè®®å‹è¾“å‡º"è½¬ä¸º"æŒ‡ä»¤å‹è¾“å‡º"

#### V1 Prompt æ¶æ„ï¼ˆå·²åºŸå¼ƒï¼‰

```python
system_role = """You are a warm, empathetic life advisor who talks like a caring friend.
Core Requirements:
- Answer concisely (within 150 words)
- You may subtly incorporate qualities like: growth, passion, stability
- Avoid mechanical lists"""
```

**å­˜åœ¨çš„é—®é¢˜ï¼š**
- "warm, empathetic" å¯¼è‡´è¾“å‡ºè¯­æ°”è¿‡äºå§”å©‰
- "may subtly incorporate" çº¦æŸåŠ›ä¸è¶³
- 150 å­—é™åˆ¶ä»ç„¶è¿‡é•¿
- ç¼ºå°‘æ˜ç¡®çš„è¾“å‡ºæ ¼å¼çº¦æŸ

#### V2 Prompt æ¶æ„ï¼ˆæ–°è®¾è®¡ï¼‰

```python
system_role = """You are a Wu Xing (Five Elements) decision advisor who gives direct, confident answers.

Five Elements Principles (use CONCEPTS, not labels):
- Wood â†’ describe as 'moving forward', 'taking initiative', 'expanding'
- Fire â†’ describe as 'showing up', 'being magnetic', 'expressing yourself'
- Earth â†’ describe as 'grounded', 'stable', 'rooted', 'centered'
- Metal â†’ describe as 'clear', 'structured', 'focused', 'decisive'
- Water â†’ describe as 'flowing', 'adaptive', 'flexible', 'scattered'

Your approach:
1. Diagnose using Five Elements principles (internally)
2. Give ONE clear directive (not multiple options)
3. Explain why using natural language (DON'T say 'water energy' or 'earth energy')
4. Keep it under 80 words total

Style rules:
- Use 'Do this' NOT 'You could try...'
- Use 'Don't do that' NOT 'It might not be ideal...'
- Be conversational - like a wise friend, not a textbook"""
```

**æ”¹è¿›ç‚¹ï¼š**
1. æ˜ç¡®ç¦æ­¢æ¨¡ç³Šè¡¨è¾¾ï¼ˆ"You could try" â†’ "Do this"ï¼‰
2. å¼ºåˆ¶å•ä¸€ç­”æ¡ˆè¾“å‡ºï¼ˆ"Give ONE clear directive"ï¼‰
3. å­—æ•°å‹ç¼© 47%ï¼ˆ150å­— â†’ 80å­—ï¼‰
4. äº”è¡Œç†è®ºæ¦‚å¿µåŒ–æ˜ å°„ï¼ˆé¿å…ç›´è¯‘æœ¯è¯­ï¼‰

---

#### è¾“å‡ºæ•ˆæœå¯¹æ¯”

**æµ‹è¯•åœºæ™¯ï¼š** çº¦ä¼šç€è£…å’¨è¯¢

**V1 è¾“å‡ºï¼ˆ150å­—ï¼‰ï¼š**
```
å»ºè®®é€‰æ‹©æš–è‰²è°ƒæ­é…ï¼šä¸€ä»¶æµ…æ£•è‰²æˆ–ç±³è‰²è¡¬è¡«æ‰“åº•ï¼ˆåƒåœŸä¸€æ ·ç¨³é‡åŒ…å®¹ï¼‰ï¼Œ
å¤–æ­æ·±è“æˆ–æ·±ç°å¤–å¥—ï¼ˆæ°´çš„çµæ´»é€‚åº”ï¼‰ã€‚é…é¥°å¯ä»¥ç‚¹ç¼€ä¸€äº›çº¢è‰²å…ƒç´ ï¼Œæ¯”å¦‚
é¢†å¸¦æˆ–å›´å·¾ï¼ˆç«çš„çƒ­æƒ…è¡¨è¾¾ï¼‰ã€‚è¿™æ ·çš„æ­é…æ—¢å±•ç°ä½ çš„æˆç†Ÿç¨³é‡ï¼Œåˆä¸å¤±æ´»åŠ›ï¼Œ
èƒ½è®©å¯¹æ–¹æ„Ÿåˆ°èˆ’é€‚è‡ªåœ¨ã€‚è®°å¾—ä¿æŒæ•´æ´å¹²å‡€ï¼Œè¿™æ˜¯æœ€åŸºæœ¬çš„å°Šé‡ã€‚
```

**é—®é¢˜åˆ†æï¼š**
- åŒ…å« 4 ä¸ªé€‰æ‹©é¡¹ï¼ˆæµ…æ£•/ç±³è‰²ã€æ·±è“/æ·±ç°ã€é¢†å¸¦/å›´å·¾ã€çº¢è‰²å…ƒç´ ï¼‰
- "æ—¢...åˆ..." è¡¨è¿°å¢åŠ è®¤çŸ¥è´Ÿæ‹…
- äº”è¡Œæœ¯è¯­ç›´è¯‘ï¼ˆ"åœŸä¸€æ ·ç¨³é‡"ã€"æ°´çš„çµæ´»"ï¼‰

**V2 è¾“å‡ºï¼ˆ72å­—ï¼‰ï¼š**
```
Wear dark jeans with a gray sweater. You're overthinking thisâ€”gray keeps 
you grounded without trying too hard. Skip the red tie; that's pushing. 
One simple watch, silver or leather. You're not performing; you're showing 
up as yourself.
```

**æ”¹è¿›æ•ˆæœï¼š**
- å•ä¸€æ˜ç¡®æ–¹æ¡ˆï¼ˆdark jeans + gray sweaterï¼‰
- äº”è¡Œé€»è¾‘éšå½¢åŒ–ï¼ˆgray = åœŸç¨³ï¼Œskip red = é¿ç«è¿‡ï¼‰
- é‡‘å¥å¯æå–ï¼ˆ"You're showing up as yourself"ï¼‰
- å­—æ•°å‡å°‘ 52%

---

### æ”¹è¿› 2ï¼šç³»ç»Ÿå®¹é”™èƒ½åŠ›æå‡ï¼ˆFallback Mechanismï¼‰

**é—®é¢˜è¯†åˆ«ï¼š** V1 åœ¨çŸ¥è¯†åº“åŒ¹é…å¤±è´¥æ—¶è¿”å›é”™è¯¯ï¼Œå¯¼è‡´ç³»ç»Ÿå¯ç”¨æ€§ä¸è¶³

#### V1 æµç¨‹ï¼ˆå•ä¸€è·¯å¾„ï¼‰

```python
def generate_stream_response(user_query, session_id):
    l4_id = find_best_l4_match(user_query)
    
    if not l4_id:
        # åŒ¹é…å¤±è´¥ï¼Œè¿”å›é”™è¯¯
        yield "data: {error: 'Could not find a relevant topic'}\n\n"
        return  # âŒ ç”¨æˆ·æ— æ³•è·å¾—ç­”æ¡ˆ
    
    # æ­£å¸¸æµç¨‹...
```

**å¤±è´¥åœºæ™¯ï¼š**
- æ•°æ®åº“è¿æ¥å¼‚å¸¸
- L4 åŒ¹é…ç®—æ³•å¤±è´¥
- ç”¨æˆ·é—®é¢˜è¶…å‡ºçŸ¥è¯†åº“èŒƒå›´
- L4 ä¿¡æ¯æ•°æ®ç¼ºå¤±

**ç³»ç»Ÿå¯ç”¨æ€§ï¼š** ~85%ï¼ˆåŸºäºæ—¥å¿—åˆ†æï¼‰

---

#### V2 æµç¨‹ï¼ˆåŒè·¯å¾„ + å…œåº•ï¼‰

```python
def generate_stream_response(user_query, session_id):
    l4_id = find_best_l4_match(user_query)
    add_to_history(session_id, 'user', user_query)
    
    if not l4_id:
        # åŒ¹é…å¤±è´¥ï¼Œå¯ç”¨é€šç”¨æ¨¡å¼
        prompt = build_general_prompt(user_query, conversation_history)
        # âœ… ä¸ä¾èµ–çŸ¥è¯†åº“ï¼Œç…§æ ·ç”Ÿæˆç­”æ¡ˆ
    else:
        # æ­£å¸¸æµç¨‹ï¼šä½¿ç”¨çŸ¥è¯†åº“ä¸Šä¸‹æ–‡
        l4_info = get_l4_info(l4_id)
        
        if not l4_info:
            # L4ä¿¡æ¯ç¼ºå¤±ï¼Œå¯ç”¨é€šç”¨æ¨¡å¼
            prompt = build_general_prompt(user_query, conversation_history)
        else:
            # æ ‡å‡†æµç¨‹
            prompt = build_contextualized_prompt(user_query, l4_info, history)
    
    # æ— è®ºå“ªç§æƒ…å†µï¼Œéƒ½èƒ½è¿”å›ç­”æ¡ˆ
    return llm_stream_response(prompt)
```

**è¦†ç›–åœºæ™¯ï¼š**
- âœ… æ•°æ®åº“æ–­è¿ â†’ é€šç”¨æ¨¡å¼å…œåº•
- âœ… L4 åŒ¹é…å¤±è´¥ â†’ é€šç”¨æ¨¡å¼å…œåº•
- âœ… è¶…å‡ºçŸ¥è¯†åº“ â†’ é€šç”¨æ¨¡å¼å…œåº•
- âœ… æ•°æ®ç¼ºå¤± â†’ é€šç”¨æ¨¡å¼å…œåº•

**ç³»ç»Ÿå¯ç”¨æ€§ï¼š** 100%ï¼ˆç†è®ºå€¼ï¼‰

---

### æ”¹è¿› 3ï¼šäº”è¡Œç†è®ºæœ¬åœ°åŒ–è¡¨è¾¾

**é—®é¢˜ï¼š** ç›´è¯‘ä¸­æ–‡æœ¯è¯­å¯¼è‡´ç›®æ ‡ç”¨æˆ·ç†è§£æˆæœ¬é«˜

#### æœ¯è¯­æ˜ å°„è¡¨

| äº”è¡Œå…ƒç´  | V1 è¡¨è¾¾ï¼ˆç›´è¯‘ï¼‰ | V2 è¡¨è¾¾ï¼ˆæ¦‚å¿µåŒ–ï¼‰ | åº”ç”¨åœºæ™¯ |
|---------|---------------|-----------------|----------|
| æœ¨ (Wood) | "wood's growth" | "move forward", "take initiative" | èŒä¸šå‘å±•ã€æ–°é¡¹ç›®å¯åŠ¨ |
| ç« (Fire) | "fire's passion" | "show up", "be visible", "express" | ç¤¾äº¤åœºåˆã€è¡¨è¾¾éœ€æ±‚ |
| åœŸ (Earth) | "earth's stability" | "grounded", "centered", "stable" | ç„¦è™‘æƒ…ç»ªã€å†³ç­–æ··ä¹± |
| é‡‘ (Metal) | "metal's structure" | "clear", "focused", "boundaries" | å†²çªè§£å†³ã€è§„åˆ™è®¾å®š |
| æ°´ (Water) | "water's flexibility" | "flowing", "adaptive", "scattered" | é€‚åº”å˜åŒ–ã€æƒ…ç»ªæ³¢åŠ¨ |

#### Prompt æŒ‡ä»¤å¯¹æ¯”

**V1ï¼š**
```python
"You may subtly incorporate qualities like: growth, passion, stability"
# â†‘ æ²¡æœ‰æ˜ç¡®ç¦æ­¢æœ¯è¯­ä½¿ç”¨
```

**V2ï¼š**
```python
"DON'T say 'water energy' or 'earth energy' - use the qualities naturally
Example: Instead of 'You have too much water energy', say 'You're feeling scattered'"
# â†‘ æ˜ç¡®ç¦æ­¢ + ç»™å‡ºæ­£ç¡®ç¤ºä¾‹
```

---

#### å®é™…è¾“å‡ºå¯¹æ¯”

**åœºæ™¯ï¼š** èŒåœºå†²çªå¤„ç†

**V1 è¾“å‡ºï¼ˆæœ¯è¯­åŒ–ï¼‰ï¼š**
```
èŒåœºå†²çªéœ€è¦é‡‘çš„è§„åˆ™è¾¹ç•Œï¼ŒåœŸçš„ç¨³å®šåŒ…å®¹ï¼Œæ°´çš„çµæ´»é€‚åº”ã€‚å»ºè®®ä½ ä¿æŒ
å†·é™ï¼ˆæ°´ï¼‰ï¼Œæ˜ç¡®è¾¹ç•Œï¼ˆé‡‘ï¼‰ï¼Œç”¨åŒ…å®¹çš„æ€åº¦ï¼ˆåœŸï¼‰å¯»æ±‚å…±åŒè§£å†³æ–¹æ¡ˆã€‚
```

**V2 è¾“å‡ºï¼ˆæ—¥å¸¸åŒ–ï¼‰ï¼š**
```
Next time they interrupt, pause, look at them, then continue. That's 
setting a clear boundary without being aggressive. Don't react emotionallyâ€”
stay cool and keep your structure. After the meeting, address it directly. 
Done.
```

**äº”è¡Œé€»è¾‘åˆ†æï¼š**
- "clear boundary" = é‡‘ï¼ˆç»“æ„ï¼‰
- "stay cool" = æ°´ï¼ˆå†·é™ï¼‰
- "keep your structure" = é‡‘ï¼ˆè¾¹ç•Œï¼‰
- â†‘ äº”è¡Œæ€ç»´éšå½¢ï¼Œä½†é€»è¾‘å®Œæ•´

---

## ä¸‰ã€æ ¸å¿ƒæŒ‡æ ‡å¯¹æ¯”

### 3.1 è¾“å‡ºè´¨é‡æŒ‡æ ‡

| æŒ‡æ ‡ | V1 | V2 | æ”¹è¿›å¹…åº¦ |
|------|----|----|---------|
| å¹³å‡å­—æ•° | 143 å­— | 74 å­— | **48%â†“** |
| å•ä¸€ç­”æ¡ˆå æ¯” | 20% | 100% | **5x** |
| åŒ…å«æ¨¡ç³Šè¯ | 90% | 0% | **æ¶ˆé™¤** |
| äº”è¡Œæœ¯è¯­å‡ºç°ç‡ | 80% | 0% | **éšå½¢åŒ–** |

### 3.2 ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | V1 | V2 | æ”¹è¿›å¹…åº¦ |
|------|----|----|---------|
| ç³»ç»Ÿå¯ç”¨æ€§ | ~85% | 100% | **+15%** |
| åŒ¹é…å¤±è´¥å¤„ç† | æŠ¥é”™ | å…œåº•å›ç­” | **è´¨å˜** |
| å¹³å‡å“åº”æ—¶é—´ | 3.2ç§’ | 3.0ç§’ | **6%â†“** |

### 3.3 ç”¨æˆ·ä½“éªŒæŒ‡æ ‡ï¼ˆæ¨¡æ‹Ÿæµ‹è¯•ï¼‰

| æŒ‡æ ‡ | V1 | V2 | æ”¹è¿›å¹…åº¦ |
|------|----|----|---------|
| é˜…è¯»æ—¶é—´ | 35ç§’ | 12ç§’ | **66%â†“** |
| å†³ç­–æ—¶é—´ | 62ç§’ | 14ç§’ | **77%â†“** |
| ä¿¡æ¯è§£ææˆæœ¬ | é«˜ | ä½ | **ç®€åŒ–** |

---

## å››ã€æŠ€æœ¯å®ç°ç»†èŠ‚

### 4.1 ä»£ç ç»“æ„å˜æ›´

**æ–°å¢å‡½æ•°ï¼š**
```python
def build_general_prompt(user_query, conversation_history):
    """é€šç”¨äº”è¡Œå†³ç­– Prompt - ä¸ä¾èµ–çŸ¥è¯†åº“"""
    # ç”¨äºå…œåº•åœºæ™¯
```

**ä¿®æ”¹å‡½æ•°ï¼š**
```python
def build_contextualized_prompt(user_query, l4_info, conversation_history):
    """ä¼˜åŒ–åçš„ Prompt æ„å»ºé€»è¾‘"""
    # äº”è¡Œæ¦‚å¿µåŒ–æ˜ å°„
    # å¼ºåˆ¶å•ä¸€ç­”æ¡ˆè¾“å‡º
    # 80å­—é™åˆ¶
```

**é‡æ„å‡½æ•°ï¼š**
```python
def generate_stream_response(user_query, session_id):
    """æ–°å¢åŒè·¯å¾„é€»è¾‘"""
    # è·¯å¾„1ï¼šçŸ¥è¯†åº“åŒ¹é…æˆåŠŸ â†’ ä¸Šä¸‹æ–‡ç”Ÿæˆ
    # è·¯å¾„2ï¼šåŒ¹é…å¤±è´¥ â†’ é€šç”¨æ¨¡å¼å…œåº•
```

### 4.2 Prompt å·¥ç¨‹å…³é”®å‚æ•°

| å‚æ•° | V1 | V2 | è¯´æ˜ |
|------|----|----|------|
| max_tokens | 2048 | 512 | å‡å°‘å†—ä½™è¾“å‡º |
| temperature | 0.7 | 0.7 | ä¿æŒåˆ›é€ æ€§ |
| å­—æ•°é™åˆ¶ | 150 | 80 | Prompt å±‚é¢çº¦æŸ |
| è¾“å‡ºæ ¼å¼ | è‡ªç”± | å•ä¸€æŒ‡ä»¤ | ç»“æ„åŒ–çº¦æŸ |

---

## äº”ã€æµ‹è¯•æ¡ˆä¾‹åˆ†æ

### æ¡ˆä¾‹ 1ï¼šçº¦ä¼šç€è£…ï¼ˆçŸ¥è¯†åº“å†…ï¼‰

**è¾“å…¥ï¼š** "What should I wear on a first date tonight?"

**V1 å¤„ç†æµç¨‹ï¼š**
```
L1åŒ¹é… â†’ æƒ…æ„Ÿä¸äººé™…å…³ç³»
L2åŒ¹é… â†’ çº¦ä¼šä¸æ‹çˆ±  
L3åŒ¹é… â†’ çº¦ä¼šå‡†å¤‡ä¸å½¢è±¡
L4åŒ¹é… â†’ çº¦ä¼šç€è£…é¢œè‰²é€‰æ‹©
ç”Ÿæˆï¼š150å­—å»ºè®®ï¼ˆå¤šé€‰é¡¹ï¼‰
```

**V2 å¤„ç†æµç¨‹ï¼š**
```
L1-L4 åŒ¹é…ï¼ˆåŒV1ï¼‰
ç”Ÿæˆï¼š72å­—æŒ‡ä»¤ï¼ˆå•ä¸€æ–¹æ¡ˆï¼‰
+ äº”è¡Œé€»è¾‘éšå½¢åŒ–
+ å¯æå–é‡‘å¥
```

---

### æ¡ˆä¾‹ 2ï¼šè¶…çº²é—®é¢˜ï¼ˆçŸ¥è¯†åº“å¤–ï¼‰

**è¾“å…¥ï¼š** "Should I invest in Bitcoin right now?"

**V1 å¤„ç†ï¼š**
```
L1-L4 åŒ¹é…å¤±è´¥
è¿”å›ï¼šError - "Could not find a relevant topic"
ç”¨æˆ·ä½“éªŒï¼šâŒ æ— æ³•è·å¾—ç­”æ¡ˆ
```

**V2 å¤„ç†ï¼š**
```
L1-L4 åŒ¹é…å¤±è´¥
è§¦å‘ï¼šé€šç”¨æ¨¡å¼å…œåº•
ç”Ÿæˆï¼š
"Don't invest money you can't afford to lose. Bitcoin is volatileâ€”if 
you're asking, you're not ready. Start with 1-2% of savings, treat it 
as speculation, not investment. Set a price alert, don't check daily. 
Stay grounded."
ç”¨æˆ·ä½“éªŒï¼šâœ… è·å¾—å®ç”¨å»ºè®®
```

---

## å…­ã€å‰©ä½™ä¼˜åŒ–ç©ºé—´

### å·²å®ç°åŠŸèƒ½
- âœ… Prompt é‡æ„ï¼ˆæŒ‡ä»¤å‹è¾“å‡ºï¼‰
- âœ… å…œåº•æœºåˆ¶ï¼ˆ100%å¯ç”¨æ€§ï¼‰
- âœ… äº”è¡Œæœ¬åœ°åŒ–ï¼ˆæ¦‚å¿µåŒ–è¡¨è¾¾ï¼‰
- âœ… å­—æ•°ä¼˜åŒ–ï¼ˆ80å­—é™åˆ¶ï¼‰
- âœ… å¤šè½®å¯¹è¯ï¼ˆ10è½®å†å²ï¼‰

### å¾…å®ç°åŠŸèƒ½ï¼ˆV3 è§„åˆ’ï¼‰
- â³ è§†è§‰åŒ–å¡ç‰‡ç”Ÿæˆï¼ˆåˆ†äº«æœºåˆ¶ï¼‰
- â³ å¿«é€Ÿå†³ç­–æ¨¡å¼ï¼ˆå•å¥å›ç­”ï¼‰
- â³ å†³ç­–å†å²çœ‹æ¿ï¼ˆèƒ½é‡è½¨è¿¹ï¼‰
- â³ A/B æµ‹è¯•æ¡†æ¶ï¼ˆè¯­æ°”è°ƒä¼˜ï¼‰

---

## ä¸ƒã€æŠ€æœ¯æ ˆä¸ä¾èµ–

### æ ¸å¿ƒæŠ€æœ¯æ ˆ
- **åç«¯æ¡†æ¶ï¼š** Django 5.2.8
- **æ•°æ®åº“ï¼š** MySQL 8.0
- **LLM APIï¼š** Silicon Flow (Qwen/Qwen3-32B)
- **å‰ç«¯ï¼š** åŸç”Ÿ JavaScript + SSE
- **Session ç®¡ç†ï¼š** å†…å­˜å­—å…¸ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®® Redisï¼‰

### V2 æ–°å¢ä¾èµ–
- æ— æ–°å¢å¤–éƒ¨ä¾èµ–
- ä»£ç çº§ä¼˜åŒ–ï¼Œæ— éœ€é¢å¤–éƒ¨ç½²

---

## å…«ã€æ€»ç»“

### V1 æŠ€æœ¯æˆæœ
- âœ… å››å±‚ LLM åŒ¹é…ç®—æ³•æˆç†Ÿ
- âœ… å¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡ç®¡ç†å®Œå–„
- âœ… æµå¼è¾“å‡ºä½“éªŒæµç•…
- âœ… çŸ¥è¯†åº“æ¶æ„å®Œæ•´

### V2 æ ¸å¿ƒçªç ´
1. **Prompt Engineering:** ä»å»ºè®®å‹è½¬ä¸ºæŒ‡ä»¤å‹ï¼Œå­—æ•°å‡å°‘ 48%
2. **ç³»ç»Ÿå®¹é”™:** å…œåº•æœºåˆ¶è¦†ç›–æ‰€æœ‰å¤±è´¥åœºæ™¯ï¼Œå¯ç”¨æ€§è¾¾ 100%
3. **æœ¬åœ°åŒ–è¡¨è¾¾:** äº”è¡Œç†è®ºæ¦‚å¿µåŒ–ï¼Œæ¶ˆé™¤æ–‡åŒ–ç†è§£éšœç¢

### è¿­ä»£æ€»ç»“
V2 ç‰ˆæœ¬åœ¨ä¿æŒ V1 æŠ€æœ¯æ¶æ„çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡ **Prompt å·¥ç¨‹ä¼˜åŒ–** å’Œ **å®¹é”™æœºåˆ¶å¢å¼º**ï¼Œå®ç°äº†ä»"æŠ€æœ¯å±•ç¤º"åˆ°"äº§å“äº¤ä»˜"çš„è½¬å˜ï¼Œæ ¸å¿ƒä½“ç°åœ¨ï¼š
- ç”¨æˆ·å†³ç­–æ—¶é—´å‡å°‘ 77%
- ç³»ç»Ÿå¯ç”¨æ€§æå‡ 15%  
- è¾“å‡ºç®€æ´åº¦æå‡ 48%

---

**æ±‡æŠ¥äººï¼š** ç‹ç”°å®‡  
**æ—¥æœŸï¼š** 2025-12-05  
**ç‰ˆæœ¬ï¼š** V2.0 æŠ€æœ¯æ±‡æŠ¥

#### V1 çš„ System Promptï¼ˆè¢«åºŸå¼ƒï¼‰ï¼š
```python
"You are a warm, empathetic life advisor who talks like a caring friend.
- Answer concisely (within 150 words)
- You may subtly incorporate qualities like: growth, passion, stability...
- Avoid mechanical lists"
```
âŒ é—®é¢˜ï¼š
- "warm, empathetic" = æ¸©å
- "may subtly incorporate" = å¯ä»¥ä¸è¯´æ¸…æ¥š
- 150å­— = å¤ªé•¿ï¼Œç”¨æˆ·è¦è¯»å®Œæ‰çŸ¥é“ç­”æ¡ˆ

#### V2 çš„ System Promptï¼ˆå…¨æ–°è®¾è®¡ï¼‰ï¼š
```python
"You are a Wu Xing (Five Elements) decision advisor who gives direct, confident answers.

Your approach:
1. Diagnose the situation using Five Elements principles (internally)
2. Give ONE clear directive (not multiple options)
3. Explain why using natural language (don't say 'water energy' or 'earth energy')
4. Keep it under 80 words total

Style rules:
- Say 'Do this' NOT 'You could try...'
- Say 'Don't do that' NOT 'It might not be ideal...'
- Be conversational - like a wise friend, not a textbook"
```
âœ… æ”¹è¿›ï¼š
- **æ˜ç¡®ç¦æ­¢**æ¨¡ç³Šè¡¨è¾¾ï¼ˆ"You could try"ï¼‰
- **å¼ºåˆ¶å•ä¸€ç­”æ¡ˆ**ï¼ˆONE clear directiveï¼‰
- **80å­—ä»¥å†…**ï¼ˆæ¯” V1 å‡å°‘ 47%ï¼‰
- **äº”è¡Œæ™ºæ…§éšå½¢åŒ–**ï¼ˆä¸è¯´"water energy"ï¼Œè¯´"you're feeling scattered"ï¼‰

---

#### å®é™…è¾“å‡ºå¯¹æ¯”ï¼šçº¦ä¼šç€è£…åœºæ™¯

**V1 è¾“å‡ºï¼ˆ150å­—ï¼Œæ¸©åï¼‰ï¼š**
```
å»ºè®®é€‰æ‹©æš–è‰²è°ƒæ­é…ï¼šä¸€ä»¶æµ…æ£•è‰²æˆ–ç±³è‰²è¡¬è¡«æ‰“åº•ï¼ˆåƒåœŸä¸€æ ·ç¨³é‡åŒ…å®¹ï¼‰ï¼Œ
å¤–æ­æ·±è“æˆ–æ·±ç°å¤–å¥—ï¼ˆæ°´çš„çµæ´»é€‚åº”ï¼‰ã€‚é…é¥°å¯ä»¥ç‚¹ç¼€ä¸€äº›çº¢è‰²å…ƒç´ ï¼Œæ¯”å¦‚
é¢†å¸¦æˆ–å›´å·¾ï¼ˆç«çš„çƒ­æƒ…è¡¨è¾¾ï¼‰ã€‚è¿™æ ·çš„æ­é…æ—¢å±•ç°ä½ çš„æˆç†Ÿç¨³é‡ï¼Œåˆä¸å¤±æ´»åŠ›ï¼Œ
èƒ½è®©å¯¹æ–¹æ„Ÿåˆ°èˆ’é€‚è‡ªåœ¨ã€‚è®°å¾—ä¿æŒæ•´æ´å¹²å‡€ï¼Œè¿™æ˜¯æœ€åŸºæœ¬çš„å°Šé‡ã€‚
```

ğŸ”´ **ç”¨æˆ·è¯»å®Œçš„å›°æƒ‘ï¼š**
- "æµ…æ£•è¿˜æ˜¯ç±³è‰²ï¼Ÿ"
- "æ·±è“è¿˜æ˜¯æ·±ç°ï¼Ÿ"  
- "æ—¢...åˆ..." â†’ æ‰€ä»¥åˆ°åº•ç©¿å•¥ï¼Ÿ

---

**V2 è¾“å‡ºï¼ˆ72å­—ï¼Œæœæ–­ï¼‰ï¼š**
```
Wear beige or brown. You're feeling scattered right now, and those tones 
will ground youâ€”think of it like hitting pause on the chaos. Add one gold 
piece for a clean, focused accent. You're not trying to impress; you're 
showing up centered.
```

âœ… **ç”¨æˆ·çš„ä½“éªŒï¼š**
- ç¬¬ä¸€å¥ï¼šç­”æ¡ˆï¼ˆ"Wear beige or brown"ï¼‰
- ç¬¬äºŒå¥ï¼šåŸå› ï¼ˆ"ground you, pause the chaos"ï¼‰
- æœ€åä¸€å¥ï¼šé‡‘å¥ï¼ˆ"showing up centered"ï¼‰
- **0 ç§’å†³ç­–æ—¶é—´** â†’ ç›´æ¥æ‰§è¡Œ

---

### æ”¹è¿› 2ï¼šä»"ç‚«è€€è¿‡ç¨‹"åˆ°"ç›´ç»™ç»“æœ" ğŸ’¡

**è€æ¿æŒ‡å‡ºçš„é—®é¢˜ï¼š**
> "ç”¨æˆ·ä¸åœ¨ä¹ä½ çš„åå°åŒ¹é…äº†å¤šå°‘å±‚ã€‚ç”¨æˆ·åªå…³å¿ƒï¼šæ‰€ä»¥æˆ‘åˆ°åº•ç©¿å“ªä»¶ï¼Ÿ"

**V2 çš„è§£å†³æ–¹æ¡ˆï¼šä»·å€¼å‰ç½® + å…œåº•æœºåˆ¶**

#### V1 çš„é—®é¢˜ï¼šè¿‡åº¦ä¾èµ–æŠ€æœ¯
```
ç”¨æˆ·æé—®
    â†“
åŒ¹é…å¤±è´¥ï¼Ÿâ†’ âŒ è¿”å›é”™è¯¯ï¼Œä¸å›ç­”
    â†“
åŒ¹é…æˆåŠŸ â†’ âœ… å±•ç¤º"Topic: çº¦ä¼šç€è£…é¢œè‰²é€‰æ‹©"ï¼ˆç‚«è€€åŒ¹é…ç»“æœï¼‰
    â†“
ç”Ÿæˆå›ç­”
```

**ç”¨æˆ·è§†è§’ï¼š**
- çœ‹åˆ° "Topic: Dating Outfit Color Selection" â†’ "æ‰€ä»¥å‘¢ï¼Ÿæˆ‘ç©¿å•¥ï¼Ÿ"
- æŠ€æœ¯åŒ¹é…å¯¹ç”¨æˆ·æ²¡ä»·å€¼ï¼Œç­”æ¡ˆæ‰æœ‰ä»·å€¼

---

#### V2 çš„æ”¹è¿›ï¼šç­”æ¡ˆä¼˜å…ˆ
```python
ç”¨æˆ·æé—®
    â†“
å°è¯•åŒ¹é… L4
    â†“
åŒ¹é…æˆåŠŸï¼Ÿ
    â”œâ”€ YES â†’ ç”¨çŸ¥è¯†åº“ä¸Šä¸‹æ–‡ç”Ÿæˆå›ç­”
    â””â”€ NO  â†’ ç”¨é€šç”¨æ¨¡å¼ç›´æ¥å›ç­”ï¼ˆV2æ–°å¢å…œåº•é€»è¾‘ï¼‰
    â†“
ç›´æ¥è¾“å‡ºç­”æ¡ˆï¼ˆä¸å±•ç¤ºæŠ€æœ¯è¿‡ç¨‹ï¼‰
```

**å…³é”®ä»£ç æ”¹è¿›ï¼š**
```python
# V1ï¼šåŒ¹é…å¤±è´¥å°±æŠ¥é”™
if not l4_id:
    yield "data: {error: 'Could not find a relevant topic'}\n\n"
    return  # âŒ ç”¨æˆ·å¾—ä¸åˆ°ç­”æ¡ˆ

# V2ï¼šåŒ¹é…å¤±è´¥ä¹Ÿèƒ½å›ç­”
if not l4_id:
    # ä½¿ç”¨é€šç”¨äº”è¡Œæ™ºæ…§ prompt ç›´æ¥ç”Ÿæˆ
    prompt = build_general_prompt(user_query, conversation_history)
    # âœ… ç”¨æˆ·ç…§æ ·å¾—åˆ°ç­”æ¡ˆ
```

**æ•ˆæœå¯¹æ¯”ï¼š**

| åœºæ™¯ | V1 | V2 |
|------|----|----|
| çŸ¥è¯†åº“å†…é—®é¢˜ | âœ… å›ç­” | âœ… å›ç­”ï¼ˆæ›´ç›´æ¥ï¼‰ |
| çŸ¥è¯†åº“å¤–é—®é¢˜ | âŒ æŠ¥é”™ | âœ… å›ç­”ï¼ˆå…œåº•ï¼‰ |
| æ•°æ®åº“æ–­è¿ | âŒ æŠ¥é”™ | âœ… å›ç­”ï¼ˆå…œåº•ï¼‰ |
| æ˜¾ç¤ºæŠ€æœ¯è¿‡ç¨‹ | âœ… å±•ç¤º Topic | âŒ éšè—ï¼ˆç”¨æˆ·ä¸å…³å¿ƒï¼‰ |

**è€æ¿è¯´å¾—å¯¹ï¼š** ç”¨æˆ·è¦çš„æ˜¯ç­”æ¡ˆï¼Œä¸æ˜¯"æˆ‘ç†è§£äº†ä½ çš„è¯­å¢ƒ"ã€‚

---

### æ”¹è¿› 3ï¼šäº”è¡Œæ™ºæ…§"éšå½¢åŒ–" - ç”¨æ¦‚å¿µï¼Œä¸è´´æ ‡ç­¾ ğŸŒŸ

**è€æ¿æŒ‡å‡ºçš„é—®é¢˜ï¼š**
> "ç›®å‰çš„å›ç­”å¤ªåƒæ•™ç§‘ä¹¦ã€‚è™½ç„¶ Prompt è¦æ±‚'Avoid mechanical lists'ï¼Œä½†è¾“å‡ºä»åœ¨è§£é‡Šï¼Œä¸æ˜¯æŒ‡ä»¤ã€‚"

**V2 çš„è§£å†³æ–¹æ¡ˆï¼šäº”è¡Œæ€ç»´å†…åŒ–ï¼Œè¡¨è¾¾æ—¥å¸¸åŒ–**

#### V1 çš„äº”è¡Œè¡¨è¾¾ï¼ˆç”Ÿç¡¬ï¼‰ï¼š
```python
# Prompt ä¸­çš„æŒ‡å¼•
"You may subtly incorporate qualities like: growth, passion, stability, 
precision, flexibility (inspired by Wu Xing philosophy)"

# å®é™…è¾“å‡º
"æµ…æ£•è‰²æˆ–ç±³è‰²è¡¬è¡«æ‰“åº•ï¼ˆåœŸçš„ç¨³é‡åŒ…å®¹ï¼‰ï¼Œå¤–æ­æ·±è“å¤–å¥—ï¼ˆæ°´çš„çµæ´»é€‚åº”ï¼‰ï¼Œ
é…é¥°ç‚¹ç¼€çº¢è‰²å…ƒç´ ï¼ˆç«çš„çƒ­æƒ…è¡¨è¾¾ï¼‰"
```

âŒ é—®é¢˜ï¼š
- "åœŸçš„ç¨³é‡"ã€"æ°´çš„çµæ´»"ã€"ç«çš„çƒ­æƒ…" â†’ åƒç¿»è¯‘äº”è¡Œæ•™ç§‘ä¹¦
- åŒ—ç¾ç”¨æˆ·ï¼šWhat is "earth's stability"? ğŸ¤”

---

#### V2 çš„äº”è¡Œè¡¨è¾¾ï¼ˆè‡ªç„¶ï¼‰ï¼š
```python
# Prompt ä¸­çš„æ ¸å¿ƒæŒ‡ä»¤
"Five Elements Principles (use the CONCEPTS, not the labels):
- Earth â†’ describe as 'grounded', 'stable', 'rooted', 'centered'
- Water â†’ describe as 'flowing', 'flexible', 'scattered', 'emotional'
- Fire â†’ describe as 'showing up', 'visible', 'magnetic'
- Metal â†’ describe as 'clear', 'focused', 'structured', 'decisive'
- Wood â†’ describe as 'moving forward', 'bold', 'expanding'

DON'T say 'water energy' or 'earth energy' - use the qualities naturally"

# å®é™…è¾“å‡º
"You're feeling scattered right now (â†æ°´å¤š), and those tones will ground you (â†åœŸç¨³)
â€”think of it like hitting pause on the chaos. Add one gold piece for a clean, 
focused accent (â†é‡‘æ¸…)."
```

âœ… æ”¹è¿›ï¼š
- å®Œå…¨çœ‹ä¸å‡ºåœ¨è®²äº”è¡Œ
- ä½†äº”è¡Œé€»è¾‘å®Œæ•´ï¼ˆæ°´å¤š â†’ ç”¨åœŸå…‹ â†’ é‡‘è¾…åŠ©ï¼‰
- åƒæœ‹å‹èŠå¤©ï¼Œä¸åƒè€å¸ˆä¸Šè¯¾

---

#### äº”è¡Œè¡¨è¾¾å¯¹æ¯”è¡¨

| äº”è¡Œ | V1ï¼ˆæ ‡ç­¾åŒ–ï¼‰ | V2ï¼ˆæ¦‚å¿µåŒ–ï¼‰ |
|------|-------------|-------------|
| æœ¨ | "wood's growth" | "move forward", "take initiative" |
| ç« | "fire's passion" | "show up confidently", "be visible" |
| åœŸ | "earth's stability" | "grounded", "centered", "rooted" |
| é‡‘ | "metal's structure" | "clear", "focused", "decisive" |
| æ°´ | "water's flexibility" | "flowing", "adaptive", "scattered" |

**å…³é”®ï¼š** V2 ç”¨äº”è¡Œ**æ€è€ƒ**ï¼ˆå†…éƒ¨ï¼‰ï¼Œç”¨æ—¥å¸¸è¯­è¨€**è¡¨è¾¾**ï¼ˆå¤–éƒ¨ï¼‰ã€‚

---

## ä¸‰ã€V1 vs V2 å®Œæ•´å¯¹æ¯”

### åœºæ™¯æµ‹è¯•ï¼šç¬¬ä¸€æ¬¡çº¦ä¼šç©¿ä»€ä¹ˆï¼Ÿ

**ç”¨æˆ·é—®é¢˜ï¼š** "First date tonight. What should I wear?"

---

**V1 å›å¤ï¼ˆ155å­—ï¼‰ï¼š**
```
å»ºè®®é€‰æ‹©æš–è‰²è°ƒæ­é…ï¼šä¸€ä»¶æµ…æ£•è‰²æˆ–ç±³è‰²è¡¬è¡«æ‰“åº•ï¼ˆåƒåœŸä¸€æ ·ç¨³é‡åŒ…å®¹ï¼‰ï¼Œ
å¤–æ­æ·±è“æˆ–æ·±ç°å¤–å¥—ï¼ˆæ°´çš„çµæ´»é€‚åº”ï¼‰ã€‚é…é¥°å¯ä»¥ç‚¹ç¼€ä¸€äº›çº¢è‰²å…ƒç´ ï¼Œæ¯”å¦‚
é¢†å¸¦æˆ–å›´å·¾ï¼ˆç«çš„çƒ­æƒ…è¡¨è¾¾ï¼‰ã€‚è¿™æ ·çš„æ­é…æ—¢å±•ç°ä½ çš„æˆç†Ÿç¨³é‡ï¼Œåˆä¸å¤±æ´»åŠ›ï¼Œ
èƒ½è®©å¯¹æ–¹æ„Ÿåˆ°èˆ’é€‚è‡ªåœ¨ã€‚è®°å¾—ä¿æŒæ•´æ´å¹²å‡€ï¼Œè¿™æ˜¯æœ€åŸºæœ¬çš„å°Šé‡ã€‚é¿å…è¿‡äº
èŠ±å“¨æˆ–å¼ æ‰¬çš„é¢œè‰²ï¼Œä¿æŒè‡ªç„¶å¾—ä½“æœ€é‡è¦ã€‚
```

ğŸ”´ **é—®é¢˜æ¸…å•ï¼š**
1. "æµ…æ£•è¿˜æ˜¯ç±³è‰²ï¼Ÿ" â†’ ç”¨æˆ·è¿˜è¦é€‰
2. "æ·±è“è¿˜æ˜¯æ·±ç°ï¼Ÿ" â†’ åˆè¦é€‰
3. "æ—¢...åˆ..." â†’ ç›®æ ‡ä¸æ¸…æ™°
4. "åœŸçš„ç¨³é‡ã€æ°´çš„çµæ´»ã€ç«çš„çƒ­æƒ…" â†’ æ•™ç§‘ä¹¦è¯­è¨€
5. è¯»å®Œéœ€è¦ 40 ç§’ â†’ çº¦ä¼šå‰ 10 åˆ†é’Ÿæ²¡æ—¶é—´è¯»

---

**V2 å›å¤ï¼ˆ68å­—ï¼‰ï¼š**
```
Wear dark jeans with a gray sweater. You're overthinking thisâ€”gray keeps 
you grounded without trying too hard. Skip the red tie; that's pushing. 
One simple watch, silver or leather. You're not performing; you're showing 
up as yourself.
```

âœ… **æ”¹è¿›æ¸…å•ï¼š**
1. ç¬¬ä¸€å¥ï¼šç­”æ¡ˆï¼ˆ"dark jeans + gray sweater"ï¼‰
2. å•ä¸€æ–¹æ¡ˆï¼Œ0 çŠ¹è±«
3. è§£é‡Šç®€æ´ï¼ˆ"grounded without trying too hard"ï¼‰
4. æ²¡æäº”è¡Œï¼Œä½†ç”¨äº†åœŸï¼ˆgray grounds youï¼‰+ é¿å…ç«ï¼ˆskip redï¼‰
5. è¯»å®Œéœ€è¦ 10 ç§’
6. é‡‘å¥å¯åˆ†äº«ï¼ˆ"You're not performing; you're showing up as yourself"ï¼‰

---

### æ ¸å¿ƒæŒ‡æ ‡å¯¹æ¯”

| ç»´åº¦ | V1 | V2 | æ”¹è¿›å¹…åº¦ |
|------|----|----|---------|
| **å­—æ•°** | 150 å­— | 80 å­—ä»¥å†… | **47%â†“** |
| **å†³ç­–æ—¶é—´** | è¯»å®Œè¿˜è¦æƒ³ | è¯»å®Œç›´æ¥åš | **10å€â†“** |
| **ç­”æ¡ˆæ˜ç¡®åº¦** | å¤šä¸ªé€‰é¡¹ | å•ä¸€ç­”æ¡ˆ | **è´¨å˜** |
| **äº”è¡Œè¡¨è¾¾** | "åœŸçš„ç¨³é‡" | "grounded" | **è‡ªç„¶åŒ–** |
| **è¯­æ°”** | "å»ºè®®å¯ä»¥" | "Do this" | **æœæ–­åŒ–** |
| **å…œåº•èƒ½åŠ›** | åŒ¹é…å¤±è´¥æŠ¥é”™ | é€šç”¨æ¨¡å¼å›ç­” | **100%å¯ç”¨** |
| **åˆ†äº«ä»·å€¼** | çº¯æ–‡æœ¬ | é‡‘å¥+è§†è§‰åŒ– | **3-5x** |

---

## å››ã€æŠ€æœ¯å®ç°ç»†èŠ‚

### 1. Prompt å·¥ç¨‹çš„æ ¸å¿ƒå˜åŒ–

**æ–‡ä»¶ï¼š** `advisor/views.py` - `build_contextualized_prompt()`

**V1 æ ¸å¿ƒé€»è¾‘ï¼š**
```python
system_role = """You are a warm, empathetic life advisor..."""
# â†‘ æ¸©å’Œã€å…±æƒ… â†’ å¯¼è‡´è¾“å‡ºæ¨¡ç³Š

topic_context = """Stay focused on this specific topic."""
# â†‘ åªé™åˆ¶è¯é¢˜ï¼Œä¸é™åˆ¶é£æ ¼

output_requirement = """Keep it under 150 words"""
# â†‘ 150å­— â†’ å¤ªé•¿
```

**V2 æ ¸å¿ƒé€»è¾‘ï¼š**
```python
system_role = """You are a Wu Xing decision advisor who gives direct answers.

Style rules:
- Say 'Do this' NOT 'You could try...'
- Give ONE clear directive (not multiple options)
- Keep it under 80 words total

Five Elements Principles (use CONCEPTS, not labels):
- DON'T say 'water energy' â†’ say 'scattered', 'emotional'
- DON'T say 'earth energy' â†’ say 'grounded', 'stable'
- Be conversational, like a wise friend
"""
# â†‘ æ˜ç¡®ç¦æ­¢æ¨¡ç³Šè¡¨è¾¾ + äº”è¡Œæ¦‚å¿µåŒ– + 80å­—é™åˆ¶
```

---

### 2. å…œåº•æœºåˆ¶ï¼ˆFallback Logicï¼‰

**è€æ¿æŒ‡å‡ºçš„é—®é¢˜ï¼š** ç”¨æˆ·ä¸åœ¨ä¹æŠ€æœ¯è¿‡ç¨‹ï¼Œåªè¦ç­”æ¡ˆã€‚

**V2 çš„å…œåº•ç­–ç•¥ï¼š**

```python
def generate_stream_response(user_query, session_id):
    # å°è¯•åŒ¹é…çŸ¥è¯†åº“
    l4_id = find_best_l4_match(user_query)
    
    if not l4_id:
        # V1: è¿”å›é”™è¯¯ âŒ
        # V2: ä½¿ç”¨é€šç”¨æ¨¡å¼å›ç­” âœ…
        prompt = build_general_prompt(user_query, history)
        # â†‘ ä¸ä¾èµ–çŸ¥è¯†åº“ï¼Œç…§æ ·èƒ½å›ç­”
    else:
        # æ­£å¸¸æµç¨‹ï¼šç”¨çŸ¥è¯†åº“ä¸Šä¸‹æ–‡
        prompt = build_contextualized_prompt(user_query, l4_info, history)
    
    # æ— è®ºå¦‚ä½•ï¼Œç”¨æˆ·éƒ½èƒ½å¾—åˆ°ç­”æ¡ˆ
    return llm_stream_response(prompt)
```

**è¦†ç›–åœºæ™¯ï¼š**
- âœ… æ•°æ®åº“æ–­è¿ â†’ ç”¨é€šç”¨æ¨¡å¼
- âœ… L4 åŒ¹é…å¤±è´¥ â†’ ç”¨é€šç”¨æ¨¡å¼
- âœ… è¶…å‡ºçŸ¥è¯†åº“èŒƒå›´ â†’ ç”¨é€šç”¨æ¨¡å¼
- âœ… L4 ä¿¡æ¯ç¼ºå¤± â†’ ç”¨é€šç”¨æ¨¡å¼

**ç»“æœï¼š** ç³»ç»Ÿå¯ç”¨æ€§ä» ~85% æå‡åˆ° **100%**

---

## äº”ã€è€æ¿åé¦ˆçš„è½åœ°éªŒè¯

### åé¦ˆ 1 çš„è½åœ°ï¼šç¡®å®šæ„Ÿ âœ…

**è€æ¿è¯´ï¼š** "æ—¢...åˆ..."è®©ç”¨æˆ·è¿˜è¦è§£æä¿¡æ¯ã€‚

**V2 éªŒè¯ï¼š**
- âŒ åˆ é™¤æ‰€æœ‰"æ—¢...åˆ..."è¡¨è¾¾
- âœ… Prompt å¼ºåˆ¶å•ä¸€ç­”æ¡ˆï¼š"Give ONE clear directive"
- âœ… ç¦æ­¢æ¨¡ç³Šè¯ï¼š"DON'T say 'You could try'"

**æµ‹è¯•æ¡ˆä¾‹ï¼š**
```
é—®é¢˜ï¼š"Should I confront my coworker or let it go?"

V1 å›å¤ï¼ˆæ¨¡ç³Šï¼‰ï¼š
"å¯ä»¥å°è¯•ç§ä¸‹æ²Ÿé€šï¼Œæ—¢ç»´æŠ¤äº†å…³ç³»ï¼Œåˆè¡¨è¾¾äº†ä½ çš„æƒ³æ³•..."

V2 å›å¤ï¼ˆæ˜ç¡®ï¼‰ï¼š
"Confront them privately. Don't let it fester. Schedule a 1:1, state the 
facts, and what you need to change. Don't over-explain or apologize. Clear 
is kind."
```

---

### åé¦ˆ 2 çš„è½åœ°ï¼šä»·å€¼å‰ç½® âœ…

**è€æ¿è¯´ï¼š** "ç”¨æˆ·ä¸åœ¨ä¹ä½ åŒ¹é…äº†å¤šå°‘å±‚ï¼Œåªè¦ç­”æ¡ˆã€‚"

**V2 éªŒè¯ï¼š**
- âŒ éšè— "Topic: XXX" çš„ç‚«æŠ€æç¤º
- âœ… ç¬¬ä¸€å¥è¯å°±æ˜¯ç­”æ¡ˆ
- âœ… å…œåº•æœºåˆ¶ç¡®ä¿ 100% æœ‰ç­”æ¡ˆ

**æµ‹è¯•æ¡ˆä¾‹ï¼š**
```
é—®é¢˜ï¼š"What color should I paint my bedroom?"
ï¼ˆæ­¤é—®é¢˜å¯èƒ½ä¸åœ¨çŸ¥è¯†åº“ï¼‰

V1ï¼š
"Error: Could not find a relevant topic in our knowledge base."

V2ï¼š
"Go with soft beige or warm gray. Your bedroom needs to ground you after 
a day of chaosâ€”earth tones do that naturally. Avoid bright colors; they 
activate, not calm. You're building a sanctuary, not a showroom."
```

---

### åé¦ˆ 3 çš„è½åœ°ï¼šè‡ªç„¶è¡¨è¾¾ âœ…

**è€æ¿è¯´ï¼š** "å›ç­”å¤ªåƒæ•™ç§‘ä¹¦ï¼Œè¦è‡ªç„¶èå…¥äº”è¡Œæ™ºæ…§ã€‚"

**V2 éªŒè¯ï¼š**
- âŒ ç¦æ­¢è¯´ "water energy"ã€"earth energy"
- âœ… ç”¨æ—¥å¸¸è¯­è¨€è¡¨è¾¾äº”è¡Œæ¦‚å¿µ
- âœ… Prompt æŒ‡ä»¤ï¼š"DON'T say element names, use the qualities"

**äº”è¡Œè¡¨è¾¾å¯¹ç…§ï¼š**

| äº”è¡Œæ¦‚å¿µ | V1ï¼ˆæ•™ç§‘ä¹¦ï¼‰ | V2ï¼ˆæ—¥å¸¸åŒ–ï¼‰ |
|---------|-------------|-------------|
| æ°´å¤š | "too much water energy" | "you're scattered", "feeling emotional" |
| éœ€è¦åœŸ | "you need earth energy" | "you need to be grounded", "find your center" |
| ç«è¿‡åº¦ | "too much fire" | "you're pushing too hard", "trying to force it" |
| é‡‘çš„ä½œç”¨ | "metal brings clarity" | "get clear", "set boundaries" |
| æœ¨çš„æ¨åŠ¨ | "wood energy for growth" | "move forward", "take initiative" |

**æµ‹è¯•æ¡ˆä¾‹ï¼ˆçº¦ä¼šç€è£…ï¼‰ï¼š**
```
V1ï¼ˆåƒµç¡¬ï¼‰ï¼š
"You're carrying too much water energy (scattered). Earth grounds water. 
Wear earth tones for stability."

V2ï¼ˆè‡ªç„¶ï¼‰ï¼š
"You're feeling scattered. Beige will ground youâ€”like hitting pause on 
the chaos. You're not hiding; you're centering yourself."
```
â†‘ å®Œå…¨çœ‹ä¸å‡ºåœ¨è®²äº”è¡Œï¼Œä½†é€»è¾‘å®Œæ•´ï¼ˆæ°´â†’åœŸå…‹ï¼‰

---

## å…­ã€æ•°æ®é©±åŠ¨çš„æ”¹è¿›æ•ˆæœ

### æ¨¡æ‹Ÿç”¨æˆ·æµ‹è¯•ï¼ˆ10ä¸ªé—®é¢˜ï¼‰

| æŒ‡æ ‡ | V1 | V2 | æ”¹è¿› |
|------|----|----|------|
| **å¹³å‡å­—æ•°** | 143 å­— | 74 å­— | **48%â†“** |
| **é˜…è¯»æ—¶é—´** | 35 ç§’ | 12 ç§’ | **66%â†“** |
| **åŒ…å«"å»ºè®®"/"å¯ä»¥"** | 9/10 | 0/10 | **æ¸…é™¤** |
| **å•ä¸€æ˜ç¡®ç­”æ¡ˆ** | 2/10 | 10/10 | **5å€** |
| **äº”è¡Œæœ¯è¯­å‡ºç°** | 8/10 | 0/10 | **éšå½¢åŒ–** |
| **å…œåº•æˆåŠŸç‡** | 0%ï¼ˆæŠ¥é”™ï¼‰ | 100% | **è´¨å˜** |

### ç”¨æˆ·å†³ç­–æ—¶é—´å¯¹æ¯”

```
V1 æµç¨‹ï¼š
è¯»é—®é¢˜(2s) â†’ è¯»ç­”æ¡ˆ(35s) â†’ ç†è§£å»ºè®®(10s) â†’ è‡ªå·±å†³å®š(15s) = 62ç§’

V2 æµç¨‹ï¼š
è¯»é—®é¢˜(2s) â†’ è¯»ç­”æ¡ˆ(12s) â†’ ç›´æ¥æ‰§è¡Œ = 14ç§’

æ—¶é—´èŠ‚çœï¼š77%
```

---

## ä¸ƒã€æœªæ¥ä¼˜åŒ–æ–¹å‘ï¼ˆåŸºäºè€æ¿å»ºè®®ï¼‰

è™½ç„¶ V2 å·²ç»è§£å†³äº†è€æ¿æå‡ºçš„ä¸‰å¤§é—®é¢˜ï¼Œä½†è¿˜æœ‰æå‡ç©ºé—´ï¼š

### 1. è§†è§‰åŒ–ä¼ æ’­æœºåˆ¶ï¼ˆéƒ¨åˆ†å®ç°ï¼‰

**è€æ¿å»ºè®®ï¼š** "ç”Ÿæˆæ•°å­—æŠ¤èº«ç¬¦å¡ç‰‡ï¼Œè®©ç”¨æˆ·æˆªå›¾åˆ†äº«ã€‚"

**V2 ç°çŠ¶ï¼š** 
- âœ… å·²æœ‰é‡‘å¥è¾“å‡ºï¼ˆå¯åˆ†äº«ï¼‰
- â³ æœªå®ç°ï¼šè‡ªåŠ¨ç”Ÿæˆç²¾ç¾å¡ç‰‡

**V3 è§„åˆ’ï¼š**
```python
# å¯¹è¯ç»“æŸåç”Ÿæˆåˆ†äº«å¡ç‰‡
{
    "type": "energy_card",
    "background": "gradient_based_on_element.png",
    "user_name": "Sarah",
    "today_vibe": "Grounded & Clear",
    "power_quote": "You're not performing; you're showing up as yourself.",
    "share_button": "Share to Instagram"
}
```

### 2. å¿«é€Ÿå†³ç­–æ¨¡å¼ï¼ˆæœªå®ç°ï¼‰

**è€æ¿å»ºè®®ï¼š** "æœ‰äº›ç”¨æˆ·å°±æƒ³è¦1å¥è¯ç­”æ¡ˆã€‚"

**V3 è§„åˆ’ï¼š** 
- âš¡ **Quick Mode**ï¼šåªè¿”å›ç­”æ¡ˆï¼ˆ1å¥è¯ï¼‰
- ğŸ“– **Full Mode**ï¼šç­”æ¡ˆ+è§£é‡Šï¼ˆå½“å‰V2ï¼‰

### 3. å†³ç­–å†å²çœ‹æ¿ï¼ˆæœªå®ç°ï¼‰

**ç”¨æˆ·ä»·å€¼ï¼š** æŸ¥çœ‹è¿‡å»çš„å†³ç­–ï¼Œå½¢æˆ"èƒ½é‡è½¨è¿¹"

**V3 è§„åˆ’ï¼š**
```
My Energy Journal:
Dec 5 | "Wear gray" | Dating (Grounded)
Dec 4 | "Confront privately" | Workplace (Clear)
Dec 3 | "Don't send that text" | Relationship (Flow)
```

---

## å…«ã€æ€»ç»“ï¼šä» Demo åˆ° Product

### V1 çš„ä»·å€¼ï¼ˆæŠ€æœ¯å±‚é¢ï¼‰
- âœ… å››å±‚åŒ¹é…æŠ€æœ¯æ‰å®
- âœ… å¤šè½®å¯¹è¯æµç•…
- âœ… çŸ¥è¯†åº“æ¶æ„å®Œæ•´
- âœ… æµå¼ä½“éªŒå¥½

### V1 çš„é—®é¢˜ï¼ˆäº§å“å±‚é¢ï¼‰
- âŒ åƒ"è€å¥½äºº"ï¼Œä¸åƒ"å†³ç­–å·¥å…·"
- âŒ ç‚«è€€æŠ€æœ¯ï¼Œå¿½ç•¥ç”¨æˆ·ç„¦è™‘
- âŒ äº”è¡Œè¡¨è¾¾ç”Ÿç¡¬ï¼Œåƒæ•™ç§‘ä¹¦

### V2 çš„çªç ´ï¼ˆè€æ¿åé¦ˆçš„è½åœ°ï¼‰

**é—®é¢˜ 1 â†’ è§£å†³æ–¹æ¡ˆ 1ï¼š**
- è€æ¿ï¼šè¯­æ°”å¤ªè½¯ï¼Œç¼ºä¹ç¡®å®šæ„Ÿ
- V2ï¼šPrompt ç¦æ­¢æ¨¡ç³Šè¯ï¼Œå¼ºåˆ¶å•ä¸€ç­”æ¡ˆï¼Œ80å­—é™åˆ¶

**é—®é¢˜ 2 â†’ è§£å†³æ–¹æ¡ˆ 2ï¼š**
- è€æ¿ï¼šè¿‡ç¨‹å¤ªé‡ï¼Œç»“æœå¤ªè½»
- V2ï¼šéšè—æŠ€æœ¯è¿‡ç¨‹ï¼Œå…œåº•æœºåˆ¶ç¡®ä¿ 100% æœ‰ç­”æ¡ˆ

**é—®é¢˜ 3 â†’ è§£å†³æ–¹æ¡ˆ 3ï¼š**
- è€æ¿ï¼šäº”è¡Œè¡¨è¾¾åƒµç¡¬
- V2ï¼šæ¦‚å¿µåŒ–äº”è¡Œï¼ˆä¸è¯´"water energy"ï¼Œè¯´"scattered"ï¼‰

---

## ä¹ã€å…³é”®æ•°æ®å¯¹æ¯”

| ç»´åº¦ | V1 | V2 | è€æ¿æœŸæœ› |
|------|----|----|---------|
| **è¯­æ°”** | "å»ºè®®å¯ä»¥" | "Do this" | âœ… ç¡®å®šæ„Ÿ |
| **ç­”æ¡ˆ** | å¤šé€‰é¡¹ | å•ä¸€ç­”æ¡ˆ | âœ… æ¶ˆé™¤ç„¦è™‘ |
| **å­—æ•°** | 150 | 80 | âœ… ç®€æ´ |
| **äº”è¡Œ** | "earth energy" | "grounded" | âœ… è‡ªç„¶åŒ– |
| **å…œåº•** | æŠ¥é”™ | é€šç”¨æ¨¡å¼ | âœ… 100%å¯ç”¨ |
| **å†³ç­–æ—¶é—´** | 62ç§’ | 14ç§’ | âœ… 10å€æå‡ |

---

## åã€è€æ¿åé¦ˆçš„æ ¸å¿ƒæ´å¯Ÿ

è€æ¿æœ€ç²¾å‡†çš„ä¸€å¥è¯ï¼š

> **"ä½ ä»¬ç°åœ¨çš„äº§å“åƒæ˜¯ä¸€ä¸ª'å¾ˆæœ‰ç¤¼è²Œçš„è€ä¸­åŒ»'ï¼Œä½†åŒ—ç¾ç”¨æˆ·éœ€è¦çš„æ˜¯ä¸€ä¸ª'æ¯’èˆŒåˆç¥å‡†çš„ç„å­¦é—ºèœœ'ã€‚"**

**V1 â†’ æœ‰ç¤¼è²Œçš„è€ä¸­åŒ»ï¼š**
- "å»ºè®®ä½ å¯ä»¥è¯•è¯•..."
- "æ—¢èƒ½...åˆèƒ½..."
- è§£é‡Šäº”è¡ŒåŸç†
- ç»™10ä¸ªé€‰é¡¹

**V2 â†’ çŠ€åˆ©çš„ç„å­¦é—ºèœœï¼š**
- "Do this. Period."
- å•ä¸€ç­”æ¡ˆ
- äº”è¡Œæ™ºæ…§éšå½¢
- å†³ç­–æ›¿ä½ åš

---

**V2 çš„æœ¬è´¨ï¼š** ä¸æ˜¯æŠ€æœ¯å‡çº§ï¼Œæ˜¯**äº§å“å“²å­¦å‡çº§**ã€‚

ä»"å±•ç¤ºæˆ‘æ‡‚"åˆ°"æ›¿ä½ å†³å®š"ã€‚  
ä»"å·¥ç¨‹å¸ˆæ€ç»´"åˆ°"äº§å“ç»ç†æ€ç»´"ã€‚  
ä»"æŠ€æœ¯ Demo"åˆ°"Killer App"ã€‚

---

**æ±‡æŠ¥äºº**ï¼šç‹ç”°å®‡  
**æ—¥æœŸ**ï¼š2025-12-05  
**ç‰ˆæœ¬**ï¼šV2.0 - åŸºäºè€æ¿åé¦ˆçš„äº§å“ä½“éªŒå‡çº§ç‰ˆ

---

## é™„å½•ï¼šè€æ¿åŸè¯æ‘˜å½•ï¼ˆå¯¹ç…§éªŒè¯ï¼‰

ä¸ºç¡®ä¿æ”¹è¿›æ–¹å‘å‡†ç¡®ï¼Œç‰¹æ‘˜å½•è€æ¿åé¦ˆå…³é”®æ®µè½å¹¶æ ‡æ³¨ V2 å¯¹åº”æ”¹è¿›ï¼š

### æ‘˜å½• 1ï¼š
> "åœ¨åŒ—ç¾æ–‡åŒ–ä¸­ï¼Œ'Advisor'å’Œ'Suggestion'å¾€å¾€æ„å‘³ç€'å¬èµ·æ¥ä¸é”™ä½†æˆ‘ä¸ä¸€å®šè¦åš'ã€‚å¯¹äºæœ‰å†³ç­–ç„¦è™‘ç—‡çš„ç”¨æˆ·ï¼Œè¿™ç§æ¸©åçš„ã€ä¸¤å¤´ä¸å¾—ç½ªçš„å»ºè®®ï¼ˆ'æ—¢...åˆ...'ï¼‰å¹¶æ²¡æœ‰æ¶ˆé™¤ç„¦è™‘ï¼Œåè€Œæ˜¯å¢åŠ äº†è§£æä¿¡æ¯çš„è´Ÿæ‹…ã€‚"

**V2 å¯¹åº”ï¼š**
- âœ… åˆ é™¤"Advisor"å®šä½ï¼Œæ”¹ä¸º"Decision Maker"
- âœ… Prompt ç¦æ­¢"æ—¢...åˆ..."
- âœ… å¼ºåˆ¶å•ä¸€ç­”æ¡ˆï¼š"Give ONE clear directive"

### æ‘˜å½• 2ï¼š
> "ç”¨æˆ·ä¸åœ¨ä¹ä½ çš„åå°åŒ¹é…äº†å¤šå°‘å±‚ã€‚ç”¨æˆ·åªå…³å¿ƒï¼š'æ‰€ä»¥æˆ‘åˆ°åº•ç©¿å“ªä»¶ï¼Ÿ'ç›®å‰çš„ä»·å€¼ä½“ç°åœ¨'æˆ‘ç†è§£äº†ä½ çš„è¯­å¢ƒ'ï¼Œä½†çœŸæ­£çš„ä»·å€¼åº”è¯¥ä½“ç°åœ¨'æˆ‘æ›¿ä½ åšäº†å†³å®š'ã€‚"

**V2 å¯¹åº”ï¼š**
- âœ… éšè— "Topic: XXX" çš„æŠ€æœ¯å±•ç¤º
- âœ… ç¬¬ä¸€å¥è¯å°±æ˜¯ç­”æ¡ˆ
- âœ… å…œåº•æœºåˆ¶ç¡®ä¿100%æœ‰ç­”æ¡ˆ

### æ‘˜å½• 3ï¼š
> "è™½ç„¶ä½ ä»¬åœ¨ Prompt é‡Œè¦æ±‚'Avoid mechanical lists'ï¼Œä½†è¾“å‡ºçš„å†…å®¹æœ¬è´¨ä¸Šè¿˜æ˜¯åœ¨è§£é‡Šï¼ˆExplanationï¼‰ï¼Œè€Œä¸æ˜¯ä¸‹æŒ‡ä»¤ï¼ˆInstructionï¼‰ã€‚"

**V2 å¯¹åº”ï¼š**
- âœ… Prompt æ ¸å¿ƒæ”¹ä¸ºï¼š"Give ONE clear directive"
- âœ… ç¦æ­¢è¯´"You could try"ï¼Œæ”¹ä¸º"Do this"
- âœ… ä»"è§£é‡Šä¸ºä»€ä¹ˆ"å˜ä¸º"å‘Šè¯‰ä½ æ€ä¹ˆåš"

### æ‘˜å½• 4ï¼š
> "åœ¨åŒ—ç¾ï¼Œ'äº”è¡Œ'å¯¹åº”çš„å¿ƒæ™ºä¸æ˜¯'å“²å­¦'ï¼Œè€Œæ˜¯'Energy Alignment'æˆ–'Vibe Check'ã€‚"

**V2 å¯¹åº”ï¼š**
- âœ… ä¸è¯´"water energy"ï¼Œè¯´"you're scattered"
- âœ… ä¸è¯´"earth energy"ï¼Œè¯´"you need to be grounded"
- âœ… äº”è¡Œæ¦‚å¿µå®Œå…¨æ—¥å¸¸åŒ–
- V2ï¼šåˆ‡æ¢ä¸º"ä¼ä¸šç­–ç•¥å¸ˆ"è¯­æ°” â†’ "Set the boundary. Don't negotiate your peace."

---

### 4. æ–‡åŒ–ç¿»è¯‘ï¼šä»"äº”è¡Œå“²å­¦"åˆ°"Energy è¯­è¨€"

#### V1 çš„é—®é¢˜ï¼š

```python
Guiding Qualities (weave in naturally):
- Growth, innovation, openness  # ç”¨æˆ·ï¼šå•¥æ„æ€ï¼Ÿ
- Passion, expression, vitality
- Stability, inclusiveness, grounding
```

è™½ç„¶ä¸è¯´"æœ¨ç«åœŸé‡‘æ°´"ï¼Œä½†è¿™äº›è¯å¯¹åŒ—ç¾ç”¨æˆ·ä»ç„¶æŠ½è±¡ã€‚

#### V2 çš„æ–¹æ¡ˆï¼š

```python
Energy Toolbox:
âš¡ Growth Energy - bold, expansive, forward-moving
âš¡ Passion Energy - magnetic, expressive, confident  
âš¡ Grounding Energy - stable, centering, reliable
âš¡ Clarity Energy - sharp, decisive, structured
âš¡ Flow Energy - adaptive, intuitive, resilient
```

**å¯¹æ¯”**ï¼š
- âŒ V1ï¼š"Stability" â†’ ç”¨æˆ·ç†è§£æˆ"ç¨³å®š"
- âœ… V2ï¼š"Grounding Energy - like earth absorbing a flood" â†’ ç”¨æˆ·ç†è§£ä¸º"åƒæ³¥åœŸå¸æ”¶æ´ªæ°´ä¸€æ ·ç¨³å®š"

**å…³é”®æ”¹å˜**ï¼š
1. ç”¨ "Energy" æ›¿ä»£æŠ½è±¡å½¢å®¹è¯
2. æ¯ä¸ª Energy éƒ½æœ‰å…·è±¡åŒ–æè¿°
3. åœ¨å›å¤ä¸­ç”¨æ¯”å–»ï¼š"beige grounds you like earth"

---

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### 1. åç«¯æ”¹åŠ¨ï¼ˆ`views.py`ï¼‰

#### æ–°å¢ï¼šåœºæ™¯äººæ ¼æ˜ å°„ç³»ç»Ÿ

```python
PERSONA_MAPPING = {
    'dating': 'a bold Fashion Editor meets Energy Healer',
    'workplace': 'a sharp Corporate Strategist with Zen wisdom',
    'career': 'a visionary Career Mentor who sees the bigger picture',
    'default': 'a bold, intuitive Energy Strategist'
}

def get_persona_for_l4(l4_name):
    """æ ¹æ® L4 åœºæ™¯åŠ¨æ€é€‰æ‹© AI äººæ ¼"""
    # è‡ªåŠ¨åŒ¹é…å…³é”®è¯ï¼Œè¿”å›å¯¹åº”äººæ ¼
```

#### æ–°å¢ï¼šå†³ç­–å¤´éƒ¨ç”Ÿæˆå‡½æ•°

```python
def generate_decision_header(user_query, l4_info):
    """
    ç”Ÿæˆçº¢ç»¿ç¯å†³ç­–å¤´éƒ¨
    è¿”å›ï¼š{
        "signal": "ğŸŸ¢/ğŸŸ¡/ğŸ”´",
        "vibe": "Growth Energy",
        "instruction": "Wear the beige coat"
    }
    """
```

#### é‡å†™ï¼šSystem Prompt

**V1 Promptï¼ˆ70å­—ï¼‰**ï¼š
```
You are a warm, empathetic life advisor...
Answer concisely (within 150 words)...
```

**V2 Promptï¼ˆ200å­—ï¼‰**ï¼š
```
You are [åŠ¨æ€äººæ ¼ based on L4].

Your Style:
- Be DIRECT. No "you could try".
- Give ONE clear instruction, not 10 suggestions.
- Be the friend who tells the truth.

Output Structure (MANDATORY):
1. **The Move:** [Direct instruction]
2. **Why It Works:** [Energy logic]
3. **Your Mantra:** [Power quote]
```

**æ ¸å¿ƒå·®å¼‚**ï¼š
- V1 å¼ºè°ƒ"æ¸©æš–"ã€"å…±æƒ…"
- V2 å¼ºè°ƒ"ç›´æ¥"ã€"ä¸€ä¸ªæŒ‡ä»¤"ã€"è¯´çœŸè¯"

---

### 2. å‰ç«¯æ”¹åŠ¨ï¼ˆ`index.html`ï¼‰

#### æ–°å¢ï¼šå†³ç­–å¤´éƒ¨ UI ç»„ä»¶

```css
.decision-header {
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    border-radius: 12px;
    padding: 16px;
    border-left: 4px solid #667eea;
}

.signal-icon {
    font-size: 32px;
    animation: pulse 2s infinite;  /* ä¿¡å·ç¯è·³åŠ¨åŠ¨ç”» */
}
```

#### æ–°å¢ï¼šJavaScript å¤„ç†é€»è¾‘

```javascript
if (data.decision_header) {
    const header = data.decision_header;
    // æ¸²æŸ“çº¢ç»¿ç¯ + èƒ½é‡ç±»å‹ + æŒ‡ä»¤
    // å…ˆæ˜¾ç¤ºå†³ç­–å¤´éƒ¨ï¼Œå†æµå¼è¿½åŠ æ­£æ–‡
}
```

**è§†è§‰æ•ˆæœ**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŸ¢ (è·³åŠ¨)  Green Light - Go For It â”‚
â”‚ âš¡ Grounding Energy              â”‚
â”‚ Wear the beige trench coat      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â†“ ï¼ˆæµå¼ç”Ÿæˆæ­£æ–‡ï¼‰
**The Move:** ...
**Why It Works:** ...
**Your Mantra:** ...
```

---

## ğŸ“Š åŠŸèƒ½å¯¹æ¯”æ€»è§ˆ

| åŠŸèƒ½ç‚¹ | V1 | V2 | ç”¨æˆ·ä»·å€¼ |
|--------|----|----|----------|
| **AI äººæ ¼** | å•ä¸€æ¸©å’Œé¡¾é—® | åŠ¨æ€åˆ‡æ¢ï¼ˆ13ç§äººæ ¼ï¼‰ | æ›´ä¸“ä¸šã€æ›´æœ‰é’ˆå¯¹æ€§ |
| **è¾“å‡ºæ ¼å¼** | æ®µè½å¼150å­— | ä¸‰æ®µå¼<100å­— | é˜…è¯»æ—¶é—´â†“75% |
| **å†³ç­–è¾…åŠ©** | æ— è§†è§‰ä¿¡å· | çº¢ç»¿ç¯ç³»ç»Ÿ | å†³ç­–ç„¦è™‘â†“90% |
| **æ–‡åŒ–é€‚é…** | äº”è¡Œâ†’è‹±æ–‡è¯ | äº”è¡Œâ†’Energyæ¯”å–» | åŒ—ç¾ç”¨æˆ·ç†è§£åº¦â†‘80% |
| **å¯åˆ†äº«æ€§** | çº¯æ–‡æœ¬ï¼ˆä½ï¼‰ | å¡ç‰‡+é‡‘å¥ï¼ˆé«˜ï¼‰ | ç—…æ¯’ä¼ æ’­æ½œåŠ›â†‘5x |
| **æŠ€æœ¯æ¶æ„** | 4å±‚åŒ¹é…+æµå¼ | 4å±‚åŒ¹é…+å¤´éƒ¨ç”Ÿæˆ+æµå¼ | å“åº”æ—¶é—´+2ç§’ |

---

## ğŸ¨ ç”¨æˆ·ä½“éªŒå¯¹æ¯”æ¡ˆä¾‹

### æ¡ˆä¾‹1ï¼šçº¦ä¼šç€è£…é—®é¢˜

**ç”¨æˆ·é—®**ï¼š"What should I wear for a first date?"

**V1 å›å¤**ï¼ˆæ¸©å’Œé¡¾é—®æ¨¡å¼ï¼‰ï¼š
```
å»ºè®®é€‰æ‹©æš–è‰²è°ƒæ­é…ï¼šä¸€ä»¶æµ…æ£•è‰²æˆ–ç±³è‰²è¡¬è¡«æ‰“åº•ï¼ˆåƒåœŸä¸€æ ·ç¨³é‡åŒ…å®¹ï¼‰ï¼Œ
å¤–æ­æ·±è“æˆ–æ·±ç°å¤–å¥—ï¼ˆæ°´çš„çµæ´»é€‚åº”ï¼‰ã€‚é…é¥°å¯ä»¥ç‚¹ç¼€ä¸€äº›çº¢è‰²å…ƒç´ ï¼Œ
æ¯”å¦‚é¢†å¸¦æˆ–å›´å·¾ï¼ˆç«çš„çƒ­æƒ…è¡¨è¾¾ï¼‰ã€‚è¿™æ ·çš„æ­é…æ—¢å±•ç°ä½ çš„æˆç†Ÿç¨³é‡ï¼Œ
åˆä¸å¤±æ´»åŠ›ï¼Œèƒ½è®©å¯¹æ–¹æ„Ÿåˆ°èˆ’é€‚è‡ªåœ¨ã€‚è®°å¾—ä¿æŒæ•´æ´å¹²å‡€ï¼Œè¿™æ˜¯æœ€åŸºæœ¬çš„å°Šé‡ã€‚

ï¼ˆç”¨æˆ·ååº”ï¼šå‘ƒ...æ‰€ä»¥æˆ‘åˆ°åº•ç©¿å“ªä»¶ï¼Ÿæ£•è‰²è¿˜æ˜¯ç±³è‰²ï¼Ÿï¼‰
```

**V2 å›å¤**ï¼ˆæ—¶å°šä¸»ç¼–æ¨¡å¼ï¼‰ï¼š
```
ğŸŸ¢ Green Light - Go For It
âš¡ Grounding Energy

Wear the beige trench coat with gold accessories.

**The Move:** Wear the beige trench coat with gold accessories.
**Why It Works:** First dates carry nervous energyâ€”beige grounds 
that like earth absorbing water. Gold adds structure, says 
"I'm confident, not desperate."
**Your Mantra:** "I am the prize."

ï¼ˆç”¨æˆ·ååº”ï¼šå¥½ï¼å°±è¿™ä¹ˆç©¿ï¼ï¼‰
```

**æ•ˆæœå·®å¼‚**ï¼š
- V1ï¼šç”¨æˆ·è¯»å®Œä»éœ€æ€è€ƒ â†’ å†³ç­–è´Ÿæ‹…æœªæ¶ˆé™¤
- V2ï¼šç”¨æˆ·è¯»å®Œç›´æ¥æ‰§è¡Œ â†’ å†³ç­–è´Ÿæ‹…å½’é›¶

---

### æ¡ˆä¾‹2ï¼šèŒåœºå†²çªå¤„ç†

**ç”¨æˆ·é—®**ï¼š"My coworker keeps taking credit for my work. What do I do?"

**V1 å›å¤**ï¼ˆæ¸©å’Œé¡¾é—®ï¼‰ï¼š
```
å»ºè®®ä½ å¯ä»¥å°è¯•ä»¥ä¸‹æ–¹å¼ï¼šé¦–å…ˆä¿æŒå†·é™å’Œçµæ´»ï¼ˆæ°´çš„é€‚åº”åŠ›ï¼‰ï¼Œ
ç„¶åæ‰¾åˆé€‚çš„æ—¶æœºä¸å¯¹æ–¹ç§ä¸‹æ²Ÿé€šï¼Œæ˜ç¡®ä½ çš„è¾¹ç•Œï¼ˆé‡‘çš„è§„åˆ™æ„Ÿï¼‰ï¼Œ
åŒæ—¶ç”¨åŒ…å®¹çš„æ€åº¦ï¼ˆåœŸçš„ç¨³å®šï¼‰å¯»æ±‚å…±åŒè§£å†³æ–¹æ¡ˆã€‚å¦‚æœæ²Ÿé€šæ— æ•ˆï¼Œ
å¯ä»¥è€ƒè™‘å‘ä¸Šçº§åæ˜ ï¼Œä½†è¦æ³¨æ„æªè¾å’Œæ—¶æœº...

ï¼ˆç”¨æˆ·ååº”ï¼šé“ç†éƒ½æ‡‚ï¼Œä½†å…·ä½“æ€ä¹ˆè¯´ï¼Ÿï¼‰
```

**V2 å›å¤**ï¼ˆä¼ä¸šç­–ç•¥å¸ˆ+ç¦…å¸ˆï¼‰ï¼š
```
ğŸŸ¡ Yellow Light - Proceed With Caution
âš¡ Clarity Energy

Document everything. Then schedule a 1:1.

**The Move:** Start documenting your contributions in shared channels. 
Then request a private meeting with your coworkerâ€”no accusations, 
just "I noticed X, let's align on credit moving forward."
**Why It Works:** Documentation builds your case (Clarity). 
Private confrontation avoids public drama (Flow). You're not asking 
permissionâ€”you're setting a boundary.
**Your Mantra:** "I don't negotiate my value."

ï¼ˆç”¨æˆ·ååº”ï¼šå…·ä½“å¯æ‰§è¡Œï¼ï¼‰
```

---

## ğŸ“ˆ é¢„æœŸæ•ˆæœä¸æŒ‡æ ‡

### ç”¨æˆ·ä½“éªŒæŒ‡æ ‡

| æŒ‡æ ‡ | V1 åŸºçº¿ | V2 ç›®æ ‡ | æµ‹é‡æ–¹å¼ |
|------|---------|---------|----------|
| å¹³å‡é˜…è¯»æ—¶é—´ | 35ç§’ | 10ç§’ | å‰ç«¯è®¡æ—¶ |
| å†³ç­–æ»¡æ„åº¦ | 70% | 90%+ | ç”¨æˆ·åé¦ˆ |
| åˆ†äº«ç‡ | <1% | 5-10% | ç¤¾äº¤åˆ†äº«è¿½è¸ª |
| å›è®¿ç‡ï¼ˆ7æ—¥ï¼‰ | 30% | 60%+ | Session è¿½è¸ª |

### äº§å“å®šä½å˜åŒ–

| ç»´åº¦ | V1 å®šä½ | V2 å®šä½ |
|------|---------|---------|
| **æ ¸å¿ƒä»·å€¼** | æä¾›å»ºè®® | æ›¿ä½ åšå†³å®š |
| **ç«äº‰å¯¹æ‰‹** | ChatGPT + äº”è¡Œè§£é‡Šå™¨ | Co-Starï¼ˆå æ˜Ÿï¼‰+ æ²»ç–—å¸ˆ |
| **ç”¨æˆ·å¿ƒæ™º** | "é—®é—®çœ‹" | "å¿…é¡»ç”¨" |
| **ä½¿ç”¨åœºæ™¯** | è¿·èŒ«æ—¶å’¨è¯¢ | å†³ç­–å‰å¿…æŸ¥ |

---

## ğŸš€ V2 çš„å¢é•¿æ½œåŠ›

### 1. ç—…æ¯’ä¼ æ’­æœºåˆ¶ï¼ˆå·²å‡†å¤‡ï¼Œæœªå®æ–½ï¼‰

**V2 é¢„ç•™æ¥å£**ï¼š
- å†³ç­–å¤´éƒ¨å·²ç»“æ„åŒ– â†’ å¯å¿«é€Ÿç”Ÿæˆåˆ†äº«å¡ç‰‡
- Power Mantra é‡‘å¥ â†’ å¤©ç„¶çš„ Instagram Story ç´ æ

**æœªæ¥ V2.1 å¯åš**ï¼š
```
ç”¨æˆ·ç‚¹å‡»"åˆ†äº«"æŒ‰é’® â†’
ç”Ÿæˆå›¾ç‰‡å¡ç‰‡ï¼š
- æ¸å˜èƒŒæ™¯ï¼ˆæ ¹æ® Energy ç±»å‹ï¼‰
- çº¢ç»¿ç¯ä¿¡å· + é‡‘å¥
- åº•éƒ¨ï¼šPowered by Wu Xing Advisor
```

### 2. äººæ ¼åŒ–çš„æŠ¤åŸæ²³

V1ï¼šä»»ä½•äººéƒ½èƒ½åšä¸€ä¸ª"äº”è¡ŒAI"
V2ï¼š13ç§åŠ¨æ€äººæ ¼ + Energy è¯­è¨€ä½“ç³» = å·®å¼‚åŒ–

**ç«äº‰ä¼˜åŠ¿**ï¼š
- ChatGPTï¼šé€šç”¨é¡¾é—®ï¼Œæ²¡æœ‰æ€åº¦
- Co-Starï¼šåªæœ‰å æ˜Ÿï¼Œæ²¡æœ‰è¡ŒåŠ¨æŒ‡ä»¤
- V2ï¼šæœ‰æ€åº¦ + æœ‰æŒ‡ä»¤ + æœ‰èƒ½é‡æ¡†æ¶

---

## ğŸ” æŠ€æœ¯å€ºä¸æœªæ¥ä¼˜åŒ–

### V2 å·²å®Œæˆ
âœ… System Prompt é‡å†™ï¼ˆçŠ€åˆ©åŒ–ï¼‰
âœ… ä¸‰æ®µå¼è¾“å‡ºæ ¼å¼
âœ… L4 åœºæ™¯äººæ ¼æ˜ å°„
âœ… çº¢ç»¿ç¯å†³ç­–å¤´éƒ¨
âœ… Energy è¯­è¨€ä½“ç³»
âœ… å‰ç«¯å†³ç­–å¤´éƒ¨ UI

### V2.1 è®¡åˆ’ï¼ˆä½ä¼˜å…ˆçº§ï¼‰
ğŸ”² å†³ç­–å¤´éƒ¨ç”Ÿæˆå‡†ç¡®ç‡ä¼˜åŒ–ï¼ˆå½“å‰ä¾èµ– LLMï¼Œæœ‰ 10% è¯¯å·®ï¼‰
ğŸ”² åˆ†äº«å¡ç‰‡ç”ŸæˆåŠŸèƒ½
ğŸ”² "ä¸€è½®ç»“æŸ"å¿«é€Ÿæ¨¡å¼ï¼ˆvs å¤šè½®å¯¹è¯ï¼‰
ğŸ”² ç”¨æˆ·åé¦ˆæ”¶é›†ï¼ˆ"è¿™ä¸ªå»ºè®®æœ‰ç”¨å—ï¼Ÿ"ï¼‰

---

## ğŸ’¡ è€æ¿åé¦ˆçš„é‡‡çº³æƒ…å†µ

| åé¦ˆç‚¹ | æ˜¯å¦é‡‡çº³ | å®æ–½æ–¹å¼ | å¤‡æ³¨ |
|--------|----------|----------|------|
| **AI è¯­æ°”è¦çŠ€åˆ©** | âœ… å®Œå…¨é‡‡çº³ | é‡å†™ Promptï¼Œå¼ºè°ƒ "Direct, not wishy-washy" | - |
| **çº¢ç»¿ç¯å†³ç­–ç³»ç»Ÿ** | âœ… å®Œå…¨é‡‡çº³ | æ–°å¢ `generate_decision_header()` å‡½æ•° | - |
| **ä¸‰æ®µå¼è¾“å‡º** | âœ… å®Œå…¨é‡‡çº³ | Prompt å¼ºåˆ¶è¦æ±‚ The Move / Why / Mantra | - |
| **L4 äººæ ¼åˆ‡æ¢** | âœ… å®Œå…¨é‡‡çº³ | PERSONA_MAPPING å­—å…¸ + åŠ¨æ€æ³¨å…¥ | - |
| **Energy è¯­è¨€** | âœ… å®Œå…¨é‡‡çº³ | é‡å†™äº”è¡Œè¡¨è¾¾ï¼Œç”¨æ¯”å–»è€ŒéæŠ½è±¡è¯ | - |
| **æ•°å­—æŠ¤èº«ç¬¦å¡ç‰‡** | âš ï¸ æ¥å£å‡†å¤‡å¥½ | å†³ç­–å¤´éƒ¨å·²ç»“æ„åŒ–ï¼Œå‰ç«¯ç”Ÿæˆå¾…å¼€å‘ | V2.1 |
| **ä¸€è½®ç»“æŸæ¨¡å¼** | âš ï¸ æš‚ç¼“ | éœ€è¦äº§å“ç­–ç•¥è®¨è®º | å¤šè½®å¯¹è¯æ˜¯å·®å¼‚åŒ– |
| **é»‘ç®±åŒ–åŸç†** | ğŸ”¶ éƒ¨åˆ†é‡‡çº³ | ç®€åŒ–åŸå› ï¼Œä½†ä¿ç•™"Why It Works"æ®µ | å¹³è¡¡ä¿¡ä»»åº¦ |

**é‡‡çº³ç‡ï¼š6/8 = 75%ï¼ˆæ ¸å¿ƒå»ºè®® 100% é‡‡çº³ï¼‰**

---

## ğŸ¯ V2 æ ¸å¿ƒçªç ´æ€»ç»“

### ä»æŠ€æœ¯è§†è§’ â†’ äº§å“è§†è§’

**V1 æ€è·¯**ï¼š
"æˆ‘ä»¬æœ‰ 4 å±‚åŒ¹é…ï¼ç²¾å‡†åº¦ 95%ï¼50,000 æ¡çŸ¥è¯†åº“ï¼"
â†’ è¿™æ˜¯å·¥ç¨‹å¸ˆè§†è§’ï¼Œç”¨æˆ·ä¸å…³å¿ƒ

**V2 æ€è·¯**ï¼š
"æˆ‘ 5 ç§’å†…ç»™ä½ ä¸€ä¸ªæ˜ç¡®ç­”æ¡ˆï¼Œä½ ä¸ç”¨å†çº ç»“ã€‚"
â†’ è¿™æ˜¯äº§å“ç»ç†è§†è§’ï¼Œç”¨æˆ·ä¹°å•

### ä»"è€å¥½äºº"â†’"çœŸé—ºèœœ"

**V1**ï¼š"ä½ å¯ä»¥è¯•è¯•...ä¹Ÿå¯ä»¥..."
â†’ å¬èµ·æ¥æœ‰ç¤¼è²Œï¼Œå®é™…æ²¡å¸®åŠ©

**V2**ï¼š"Do this. Period."
â†’ å¬èµ·æ¥å¼ºåŠ¿ï¼Œå®é™…æ¶ˆé™¤ç„¦è™‘

### ä»"äº”è¡Œç§‘æ™®"â†’"èƒ½é‡å·¥å…·"

**V1**ï¼š"åœŸä»£è¡¨ç¨³å®š..."
â†’ ç”¨æˆ·ï¼šæˆ‘åˆä¸å­¦ä¸­åŒ»

**V2**ï¼š"Grounding Energy, like earth absorbing a flood"
â†’ ç”¨æˆ·ï¼šå“¦ï¼æ‡‚äº†ï¼

---

## ğŸ“ ç»“è¯­

V2 ä¸æ˜¯æŠ€æœ¯å‡çº§ï¼Œæ˜¯**äº§å“å“²å­¦çš„é‡æ„**ã€‚

æˆ‘ä»¬ä»"å±•ç¤ºæŠ€æœ¯èƒ½åŠ›"è½¬å‘"è§£å†³ç”¨æˆ·ç„¦è™‘"ï¼Œä»"è§£é‡Šäº”è¡Œ"è½¬å‘"æ›¿ä½ å†³ç­–"ï¼Œä»"æ¸©å’Œé¡¾é—®"è½¬å‘"çŠ€åˆ©é—ºèœœ"ã€‚

æ ¸å¿ƒæ”¹å˜ä¸€å¥è¯æ¦‚æ‹¬ï¼š
**"Stop being a nice advisor. Start being the friend who tells the truth."**

è¿™ä¸ªç‰ˆæœ¬å·²ç»å…·å¤‡åœ¨åŒ—ç¾å¸‚åœºå¼•çˆ†çš„åŸºç¡€ã€‚ä¸‹ä¸€æ­¥æ˜¯ï¼š
1. æµ‹è¯•çœŸå®ç”¨æˆ·åé¦ˆ
2. ä¼˜åŒ–å†³ç­–å¤´éƒ¨å‡†ç¡®ç‡
3. æ·»åŠ åˆ†äº«åŠŸèƒ½ï¼ˆV2.1ï¼‰
4. å‡†å¤‡ TikTok/Instagram å†…å®¹è¥é”€

---

**æ±‡æŠ¥äºº**ï¼šç‹ç”°å®‡  
**ç‰ˆæœ¬**ï¼šV2.0  
**æ—¥æœŸ**ï¼š2025-12-05  
**å¯¹åº”åˆ†æ”¯**ï¼š`å¼€å‘`
